import{r as j,j as r,Y as B,Z as S,$ as D,t as k,E as z,B as F,a0 as R,a1 as v}from"./index-OC3WFbHG.js";import{a as g,f as m}from"./index-DaQTr7AL.js";import{F as E}from"./PencilSquareIcon-NfPaKFX0.js";function d({title:o,titleId:l,...x},t){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},x),o?j.createElement("title",{id:l},o):null,j.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l2.47-2.47a.75.75 0 1 1 1.06 1.06l-3.75 3.75a.75.75 0 0 1-1.06 0l-3.75-3.75a.75.75 0 1 1 1.06-1.06l2.47 2.47V3a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const K=j.forwardRef(d),M=j.memo(({headList:o,data:l,customClick:x,isLoading:t,lineThrough:p,trClass:b})=>{const u=()=>r.jsx("tr",{children:r.jsx("td",{colSpan:(o==null?void 0:o.length)||100,className:"relative h-80",children:r.jsx(z,{isLoading:!!t,className:"size-8"})})}),i=()=>l==null?void 0:l.map((c,e)=>r.jsx("tr",{className:k(["border-b border-gray-400",(p==null?void 0:p(c))&&"line-through",b==null?void 0:b(c)]),children:o==null?void 0:o.map((s,y)=>{let f="";return s.type==="custom"&&s.customContent?f=s.customContent(c,e):s.key&&!s.type?f=`${c[s.key]}`:s.key&&s.type?s.type==="dollar"?f=`${g(Number(c[s.key]),{type:"dollar"})}`:s.type==="number"?f=`${g(Number(c[s.key]))}`:s.type==="datetime"?f=m(Number(c[s.key])):s.type==="time"?f=m(Number(c[s.key]),{onlyTime:!0}):s.type==="date"&&(f=m(Number(c[s.key]),{onlyDate:!0})):s.type==="operation"&&!(p!=null&&p(c))&&(f=r.jsx(F,{type:"icon",className:"text-blue-700",onClick:()=>x==null?void 0:x(s.clickType,e),children:r.jsxs(r.Fragment,{children:[s.clickType==="edit"&&r.jsx(E,{className:"size-4"}),s.clickType==="delete"&&r.jsx(R,{className:"size-4"})]})})),r.jsx("td",{className:k(["p-2 text-sm sm:p-4",s.type==="dollar"&&"text-right",s.className]),children:f},y)})},e)),a=()=>r.jsx("tr",{children:r.jsx("td",{colSpan:(o==null?void 0:o.length)||100,className:"relative h-20 text-center",children:"暫無資料"})});return r.jsx(B,{mode:"wait",children:r.jsxs(S.tbody,{...D,children:[t&&r.jsx(u,{}),!t&&(l==null?void 0:l.length)===0&&r.jsx(a,{}),!t&&(l==null?void 0:l.length)!==0&&r.jsx(i,{})]},`${t}-${l==null?void 0:l.length}`)})}),O=j.memo(({headList:o,data:l,customClick:x,isLoading:t,useCard:p})=>{const b=()=>r.jsx("div",{className:"relative h-40",children:r.jsx(z,{isLoading:!!t,className:"size-8"})}),u=()=>l==null?void 0:l.map((a,c)=>r.jsx("div",{className:k(["relative my-2 grid grid-cols-2 gap-1 rounded bg-white shadow-xl","after:absolute after:top-0 after:right-0 after:bottom-0 after:left-0 after:m-auto after:h-[90%] after:w-0.5 after:bg-gray-400 after:content-['']"]),children:o==null?void 0:o.map((e,s)=>{let y="";return e.type==="custom"&&e.customContent?y=e.customContent(a,c):e.key&&!e.type?y=`${a[e.key]}`:e.key&&e.type?e.type==="dollar"?y=`${g(Number(a[e.key]),{type:"dollar"})}`:e.type==="number"?y=`${g(Number(a[e.key]))}`:e.type==="datetime"?y=m(Number(a[e.key])):e.type==="time"?y=m(Number(a[e.key]),{onlyTime:!0}):e.type==="date"&&(y=m(Number(a[e.key]),{onlyDate:!0})):e.type==="operation"&&(y=r.jsx(F,{type:"icon",className:"text-blue-700",onClick:()=>x==null?void 0:x(e.clickType,c),children:r.jsxs(r.Fragment,{children:[e.clickType==="edit"&&r.jsx(E,{className:"size-4"}),e.clickType==="delete"&&r.jsx(R,{className:"size-4"})]})})),r.jsxs("div",{className:k(["relative flex gap-1 p-2 text-sm"]),children:[r.jsx("div",{className:"flex-1 font-bold",children:e.name}),r.jsx("div",{className:"flex-1 text-right text-red-700",children:y})]},s)})},c)),i=()=>r.jsx("div",{className:"py-10 text-center",children:"暫無資料"});return r.jsx(B,{mode:"wait",children:r.jsxs(S.div,{className:k(["hidden",p==="xl"&&"block xl:hidden",p==="lg"&&"block lg:hidden",p==="md"&&"block md:hidden",p==="sm"&&"block sm:hidden"]),...D,children:[t&&r.jsx(b,{}),!t&&(l==null?void 0:l.length)===0&&r.jsx(i,{}),!t&&(l==null?void 0:l.length)!==0&&r.jsx(u,{})]},`${t}-${l==null?void 0:l.length}`)})}),V=({headList:o,className:l,data:x,customClick:t,isLoading:p,lineThrough:b,trClass:u,headClass:i,notFixed:a,useCard:c})=>{const[e,s]=j.useState(""),[y,f]=j.useState("desc"),w=n=>!n.disabledSort&&n.type!=="operation"&&n.key,A=n=>{w(n)&&(e!==n.key?(s(n.key),f("desc")):f(y==="asc"?"desc":"asc"))},$=e?[...x].sort((n,N)=>typeof n[e]=="string"&&typeof N[e]=="string"?y==="asc"?n[e].localeCompare(N[e]):N[e].localeCompare(n[e]):y==="asc"?n[e]-N[e]:N[e]-n[e]):x;return r.jsxs("div",{className:"base-table w-full scroll-mt-14",children:[r.jsxs("table",{className:v(["w-full",l,c&&"hidden",c==="xl"&&"xl:table",c==="lg"&&"lg:table",c==="md"&&"md:table",c==="sm"&&"sm:table"]),children:[r.jsx("thead",{className:v([!a&&"sticky top-14 z-10",i,'bg-gray-300 after:absolute after:h-0.5 after:w-full after:bg-gray-400 after:content-[""]']),children:r.jsx("tr",{children:o==null?void 0:o.map((n,N)=>r.jsxs("th",{className:v(["p-2 text-left text-xs text-nowrap sm:p-4 sm:text-sm",n.type==="dollar"&&"text-right",n.className,w(n)&&"cursor-pointer"]),onClick:()=>A(n),children:[n.name,w(n)&&r.jsx(K,{className:k(["inline-block size-4 transition-transform",e===n.key&&"text-red-500",e===n.key&&y==="asc"&&"rotate-180",e!==n.key&&"opacity-20"])})]},N))})}),r.jsx(M,{headList:o,data:$,customClick:t,isLoading:p,lineThrough:b,trClass:u})]}),r.jsx(O,{headList:o,data:$,customClick:t,isLoading:p,lineThrough:b,trClass:u,useCard:c})]})};export{V as B};
