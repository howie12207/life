import{d as s,O as re,K as X,y as J,h as De,i as Se,o as I,L as ne,R as w,k as Le,l as U,m as Y,_ as pe,n as Ie,x as $e,p as ke,q as Ke,t as qe,b as ve,a as Ze,r as le,A as ae,s as he,j as b,B as ce,v as Ge,w as Ue}from"./index-nAwbjeji.js";import{B as Oe}from"./index-BT-q511s.js";import{n as ye,t as We,b as He,R as ze,E as Qe,a as Ve,O as Me,C as Je,u as je,m as Ye,f as Xe,r as et,c as D,B as tt}from"./index-CSXeqvxo.js";import{$ as nt,a as rt,r as Be}from"./bugs-DwjOCybL.js";import{w as ot}from"./use-active-press-Boc8kJjl.js";import{M as lt,y as at,x as st,R as ut,b as it,d as ct}from"./floating-DQX-7d3Z.js";import{e as dt}from"./use-resolve-button-type-CBW_O7hF.js";import{b as Ce,f as fe,s as me,P as G,F as L,A as pt,h as ft,o as Z,u as mt,T as be}from"./focus-management-BTIQmBQE.js";import"./floating-ui.react-dom-B_aAqK_L.js";var bt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(bt||{}),vt=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(vt||{});let ht={0:e=>({...e,popoverState:U(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,n){return e.button===n.button?e:{...e,button:n.button}},3(e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},4(e,n){return e.panel===n.panel?e:{...e,panel:n.panel}},5(e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}},ge=s.createContext(null);ge.displayName="PopoverContext";function se(e){let n=s.useContext(ge);if(n===null){let t=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,se),t}return n}let ue=s.createContext(null);ue.displayName="PopoverAPIContext";function Pe(e){let n=s.useContext(ue);if(n===null){let t=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Pe),t}return n}let we=s.createContext(null);we.displayName="PopoverGroupContext";function Fe(){return s.useContext(we)}let ie=s.createContext(null);ie.displayName="PopoverPanelContext";function yt(){return s.useContext(ie)}function Ct(e,n){return U(n.type,ht,e,n)}let gt="div";function Pt(e,n){var t;let{__demoMode:r=!1,...l}=e,i=s.useRef(null),d=J(n,De(f=>{i.current=f})),u=s.useRef([]),h=s.useReducer(Ct,{__demoMode:r,popoverState:r?0:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:s.createRef(),afterPanelSentinel:s.createRef(),afterButtonSentinel:s.createRef()}),[{popoverState:p,button:a,buttonId:P,panel:y,panelId:S,beforePanelSentinel:v,afterPanelSentinel:C,afterButtonSentinel:c},x]=h,E=ye((t=i.current)!=null?t:a),B=s.useMemo(()=>{if(!a||!y)return!1;for(let $ of document.querySelectorAll("body > *"))if(Number($==null?void 0:$.contains(a))^Number($==null?void 0:$.contains(y)))return!0;let f=Ce(),o=f.indexOf(a),g=(o+f.length-1)%f.length,m=(o+1)%f.length,O=f[g],j=f[m];return!y.contains(O)&&!y.contains(j)},[a,y]),F=Se(P),T=Se(S),W=s.useMemo(()=>({buttonId:F,panelId:T,close:()=>x({type:1})}),[F,T,x]),N=Fe(),k=N==null?void 0:N.registerPopover,K=I(()=>{var f;return(f=N==null?void 0:N.isFocusWithinPopoverGroup())!=null?f:(E==null?void 0:E.activeElement)&&((a==null?void 0:a.contains(E.activeElement))||(y==null?void 0:y.contains(E.activeElement)))});s.useEffect(()=>k==null?void 0:k(W),[k,W]);let[M,H]=We(),q=He(a),_=ze({mainTreeNode:q,portals:M,defaultContainers:[a,y]});Qe(E==null?void 0:E.defaultView,"focus",f=>{var o,g,m,O,j,$;f.target!==window&&f.target instanceof HTMLElement&&p===0&&(K()||a&&y&&(_.contains(f.target)||(g=(o=v.current)==null?void 0:o.contains)!=null&&g.call(o,f.target)||(O=(m=C.current)==null?void 0:m.contains)!=null&&O.call(m,f.target)||($=(j=c.current)==null?void 0:j.contains)!=null&&$.call(j,f.target)||x({type:1})))},!0),Ve(p===0,_.resolveContainers,(f,o)=>{x({type:1}),pt(o,ft.Loose)||(f.preventDefault(),a==null||a.focus())});let A=I(f=>{x({type:1});let o=f?f instanceof HTMLElement?f:"current"in f&&f.current instanceof HTMLElement?f.current:a:a;o==null||o.focus()}),z=s.useMemo(()=>({close:A,isPortalled:B}),[A,B]),Q=s.useMemo(()=>({open:p===0,close:A}),[p,A]),V={ref:d},ee=ne();return w.createElement(Me,{node:q},w.createElement(lt,null,w.createElement(ie.Provider,{value:null},w.createElement(ge.Provider,{value:h},w.createElement(ue.Provider,{value:z},w.createElement(Je,{value:A},w.createElement(Le,{value:U(p,{0:Y.Open,1:Y.Closed})},w.createElement(H,null,ee({ourProps:V,theirProps:l,slot:Q,defaultTag:gt,name:"Popover"})))))))))}let wt="button";function xt(e,n){let t=s.useId(),{id:r=`headlessui-popover-button-${t}`,disabled:l=!1,autoFocus:i=!1,...d}=e,[u,h]=se("Popover.Button"),{isPortalled:p}=Pe("Popover.Button"),a=s.useRef(null),P=`headlessui-focus-sentinel-${s.useId()}`,y=Fe(),S=y==null?void 0:y.closeOthers,v=yt()!==null;s.useEffect(()=>{if(!v)return h({type:3,buttonId:r}),()=>{h({type:3,buttonId:null})}},[v,r,h]);let[C]=s.useState(()=>Symbol()),c=J(a,n,at(),I(o=>{if(!v){if(o)u.buttons.current.push(C);else{let g=u.buttons.current.indexOf(C);g!==-1&&u.buttons.current.splice(g,1)}u.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),o&&h({type:2,button:o})}})),x=J(a,n),E=ye(a),B=I(o=>{var g,m,O;if(v){if(u.popoverState===1)return;switch(o.key){case Z.Space:case Z.Enter:o.preventDefault(),(m=(g=o.target).click)==null||m.call(g),h({type:1}),(O=u.button)==null||O.focus();break}}else switch(o.key){case Z.Space:case Z.Enter:o.preventDefault(),o.stopPropagation(),u.popoverState===1&&(S==null||S(u.buttonId)),h({type:0});break;case Z.Escape:if(u.popoverState!==0)return S==null?void 0:S(u.buttonId);if(!a.current||E!=null&&E.activeElement&&!a.current.contains(E.activeElement))return;o.preventDefault(),o.stopPropagation(),h({type:1});break}}),F=I(o=>{v||o.key===Z.Space&&o.preventDefault()}),T=I(o=>{var g,m;Be(o.currentTarget)||l||(v?(h({type:1}),(g=u.button)==null||g.focus()):(o.preventDefault(),o.stopPropagation(),u.popoverState===1&&(S==null||S(u.buttonId)),h({type:0}),(m=u.button)==null||m.focus()))}),W=I(o=>{o.preventDefault(),o.stopPropagation()}),{isFocusVisible:N,focusProps:k}=nt({autoFocus:i}),{isHovered:K,hoverProps:M}=rt({isDisabled:l}),{pressed:H,pressProps:q}=ot({disabled:l}),_=u.popoverState===0,A=s.useMemo(()=>({open:_,active:H||_,disabled:l,hover:K,focus:N,autofocus:i}),[_,K,N,H,l,i]),z=dt(e,u.button),Q=v?pe({ref:x,type:z,onKeyDown:B,onClick:T,disabled:l||void 0,autoFocus:i},k,M,q):pe({ref:c,id:u.buttonId,type:z,"aria-expanded":u.popoverState===0,"aria-controls":u.panel?u.panelId:void 0,disabled:l||void 0,autoFocus:i,onKeyDown:B,onKeyUp:F,onClick:T,onMouseDown:W},k,M,q),V=je(),ee=I(()=>{let o=u.panel;if(!o)return;function g(){U(V.current,{[D.Forwards]:()=>G(o,L.First),[D.Backwards]:()=>G(o,L.Last)})===be.Error&&G(Ce().filter(m=>m.dataset.headlessuiFocusGuard!=="true"),U(V.current,{[D.Forwards]:L.Next,[D.Backwards]:L.Previous}),{relativeTo:u.button})}g()}),f=ne();return w.createElement(w.Fragment,null,f({ourProps:Q,theirProps:d,slot:A,defaultTag:wt,name:"Popover.Button"}),_&&!v&&p&&w.createElement(fe,{id:P,ref:u.afterButtonSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:ee}))}let St="div",Et=re.RenderStrategy|re.Static;function Te(e,n){let t=s.useId(),{id:r=`headlessui-popover-backdrop-${t}`,transition:l=!1,...i}=e,[{popoverState:d},u]=se("Popover.Backdrop"),[h,p]=s.useState(null),a=J(n,p),P=Ie(),[y,S]=$e(l,h,P!==null?(P&Y.Open)===Y.Open:d===0),v=I(x=>{if(Be(x.currentTarget))return x.preventDefault();u({type:1})}),C=s.useMemo(()=>({open:d===0}),[d]),c={ref:a,id:r,"aria-hidden":!0,onClick:v,...ke(S)};return ne()({ourProps:c,theirProps:i,slot:C,defaultTag:St,features:Et,visible:y,name:"Popover.Backdrop"})}let It="div",$t=re.RenderStrategy|re.Static;function kt(e,n){let t=s.useId(),{id:r=`headlessui-popover-panel-${t}`,focus:l=!1,anchor:i,portal:d=!1,modal:u=!1,transition:h=!1,...p}=e,[a,P]=se("Popover.Panel"),{close:y,isPortalled:S}=Pe("Popover.Panel"),v=`headlessui-focus-sentinel-before-${t}`,C=`headlessui-focus-sentinel-after-${t}`,c=s.useRef(null),x=st(i),[E,B]=ut(x),F=it();x&&(d=!0);let[T,W]=s.useState(null),N=J(c,n,x?E:null,I(o=>P({type:4,panel:o})),W),k=ye(c);Ke(()=>(P({type:5,panelId:r}),()=>{P({type:5,panelId:null})}),[r,P]);let K=Ie(),[M,H]=$e(h,T,K!==null?(K&Y.Open)===Y.Open:a.popoverState===0);Ye(M,a.button,()=>{P({type:1})});let q=a.__demoMode?!1:u&&M;Xe(q,k);let _=I(o=>{var g;switch(o.key){case Z.Escape:if(a.popoverState!==0||!c.current||k!=null&&k.activeElement&&!c.current.contains(k.activeElement))return;o.preventDefault(),o.stopPropagation(),P({type:1}),(g=a.button)==null||g.focus();break}});s.useEffect(()=>{var o;e.static||a.popoverState===1&&((o=e.unmount)==null||o)&&P({type:4,panel:null})},[a.popoverState,e.unmount,e.static,P]),s.useEffect(()=>{if(a.__demoMode||!l||a.popoverState!==0||!c.current)return;let o=k==null?void 0:k.activeElement;c.current.contains(o)||G(c.current,L.First)},[a.__demoMode,l,c.current,a.popoverState]);let A=s.useMemo(()=>({open:a.popoverState===0,close:y}),[a.popoverState,y]),z=pe(x?F():{},{ref:N,id:r,onKeyDown:_,onBlur:l&&a.popoverState===0?o=>{var g,m,O,j,$;let R=o.relatedTarget;R&&c.current&&((g=c.current)!=null&&g.contains(R)||(P({type:1}),((O=(m=a.beforePanelSentinel.current)==null?void 0:m.contains)!=null&&O.call(m,R)||($=(j=a.afterPanelSentinel.current)==null?void 0:j.contains)!=null&&$.call(j,R))&&R.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...p.style,...B,"--button-width":ct(a.button,!0).width},...ke(H)}),Q=je(),V=I(()=>{let o=c.current;if(!o)return;function g(){U(Q.current,{[D.Forwards]:()=>{var m;G(o,L.First)===be.Error&&((m=a.afterPanelSentinel.current)==null||m.focus())},[D.Backwards]:()=>{var m;(m=a.button)==null||m.focus({preventScroll:!0})}})}g()}),ee=I(()=>{let o=c.current;if(!o)return;function g(){U(Q.current,{[D.Forwards]:()=>{if(!a.button)return;let m=Ce(),O=m.indexOf(a.button),j=m.slice(0,O+1),$=[...m.slice(O+1),...j];for(let R of $.slice())if(R.dataset.headlessuiFocusGuard==="true"||T!=null&&T.contains(R)){let xe=$.indexOf(R);xe!==-1&&$.splice(xe,1)}G($,L.First,{sorted:!1})},[D.Backwards]:()=>{var m;G(o,L.Previous)===be.Error&&((m=a.button)==null||m.focus())}})}g()}),f=ne();return w.createElement(qe,null,w.createElement(ie.Provider,{value:r},w.createElement(ue.Provider,{value:{close:y,isPortalled:S}},w.createElement(et,{enabled:d?e.static||M:!1},M&&S&&w.createElement(fe,{id:v,ref:a.beforePanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:V}),f({ourProps:z,theirProps:p,slot:A,defaultTag:It,features:$t,visible:M,name:"Popover.Panel"}),M&&S&&w.createElement(fe,{id:C,ref:a.afterPanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:ee})))))}let Ot="div";function Mt(e,n){let t=s.useRef(null),r=J(t,n),[l,i]=s.useState([]),d=I(C=>{i(c=>{let x=c.indexOf(C);if(x!==-1){let E=c.slice();return E.splice(x,1),E}return c})}),u=I(C=>(i(c=>[...c,C]),()=>d(C))),h=I(()=>{var C;let c=mt(t);if(!c)return!1;let x=c.activeElement;return(C=t.current)!=null&&C.contains(x)?!0:l.some(E=>{var B,F;return((B=c.getElementById(E.buttonId.current))==null?void 0:B.contains(x))||((F=c.getElementById(E.panelId.current))==null?void 0:F.contains(x))})}),p=I(C=>{for(let c of l)c.buttonId.current!==C&&c.close()}),a=s.useMemo(()=>({registerPopover:u,unregisterPopover:d,isFocusWithinPopoverGroup:h,closeOthers:p}),[u,d,h,p]),P=s.useMemo(()=>({}),[]),y=e,S={ref:r},v=ne();return w.createElement(Me,null,w.createElement(we.Provider,{value:a},v({ourProps:S,theirProps:y,slot:P,defaultTag:Ot,name:"Popover.Group"})))}let jt=X(Pt),Ne=X(xt),Bt=X(Te),Ft=X(Te),_e=X(kt),Tt=X(Mt),Nt=Object.assign(jt,{Button:Ne,Backdrop:Ft,Overlay:Bt,Panel:_e,Group:Tt});function _t({title:e,titleId:n,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},t),e?s.createElement("title",{id:n},e):null,s.createElement("path",{fillRule:"evenodd",d:"m6.72 5.66 11.62 11.62A8.25 8.25 0 0 0 6.72 5.66Zm10.56 12.68L5.66 6.72a8.25 8.25 0 0 0 11.62 11.62ZM5.105 5.106c3.807-3.808 9.98-3.808 13.788 0 3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788Z",clipRule:"evenodd"}))}const At=s.forwardRef(_t);function Rt({title:e,titleId:n,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},t),e?s.createElement("title",{id:n},e):null,s.createElement("path",{fillRule:"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z",clipRule:"evenodd"}))}const Dt=s.forwardRef(Rt),Lt=()=>ve({mutationKey:["addMemoItem"],mutationFn:async e=>{var t;const n=await le({method:"post",url:`${ae}/memo`,data:e});return((t=n==null?void 0:n.data)==null?void 0:t.code)===200?(he.success("新增成功"),!0):!1},scope:{id:"addMemoItem"}}),Kt=()=>Ze({queryKey:["memoList"],queryFn:async({signal:e})=>{var t,r;const n=await le(`${ae}/memo/list`,{signal:e});return(r=(t=n==null?void 0:n.data)==null?void 0:t.data)!=null&&r.list?n.data.data.list:null},staleTime:1e3*60*60,gcTime:1e3*60*60}),qt=()=>ve({mutationKey:["editMemoItem"],mutationFn:async e=>{var t;const n=await le({method:"patch",url:`${ae}/memo?_id=${e._id}`,data:e});return((t=n==null?void 0:n.data)==null?void 0:t.code)===200?(he.success("編輯成功"),!0):!1},scope:{id:"editMemoItem"}}),Zt=()=>ve({mutationKey:["deleteMemoItem"],mutationFn:async e=>{var t;const n=await le({method:"delete",url:`${ae}/memo?_id=${e}`});return((t=n==null?void 0:n.data)==null?void 0:t.code)===200?(he.success("刪除成功"),!0):!1},scope:{id:"deleteMemoItem"}});function Gt(e,n){if(e==null)return{};var t=Ut(e,n),r,l;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)r=i[l],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function Ut(e,n){if(e==null)return{};var t={},r=Object.keys(e),l,i;for(i=0;i<r.length;i++)l=r[i],!(n.indexOf(l)>=0)&&(t[l]=e[l]);return t}function oe(){return oe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oe.apply(this,arguments)}function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ee(Object(t),!0).forEach(function(r){Wt(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Wt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const Ht={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},de=2;class Ae extends w.Component{constructor(n){super(n),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let t;this.props.breakpointCols&&this.props.breakpointCols.default?t=this.props.breakpointCols.default:t=parseInt(this.props.breakpointCols)||de,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const n=window&&window.innerWidth||1/0;let t=this.props.breakpointCols;typeof t!="object"&&(t={default:parseInt(t)||de});let r=1/0,l=t.default||de;for(let i in t){const d=parseInt(i);d>0&&n<=d&&d<r&&(r=d,l=t[i])}l=Math.max(1,parseInt(l)||1),this.state.columnCount!==l&&this.setState({columnCount:l})}itemsInColumns(){const n=this.state.columnCount,t=new Array(n),r=w.Children.toArray(this.props.children);for(let l=0;l<r.length;l++){const i=l%n;t[i]||(t[i]=[]),t[i].push(r[l])}return t}renderColumns(){const{column:n,columnAttrs:t={},columnClassName:r}=this.props,l=this.itemsInColumns(),i=`${100/l.length}%`;let d=r;d&&typeof d!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof d>"u"&&(d="my-masonry-grid_column"));const u=te(te(te({},n),t),{},{style:te(te({},t.style),{},{width:i}),className:d});return l.map((h,p)=>w.createElement("div",oe({},u,{key:p}),h))}logDeprecated(n){console.error("[Masonry]",n)}render(){const n=this.props,{children:t,breakpointCols:r,columnClassName:l,columnAttrs:i,column:d,className:u}=n,h=Gt(n,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let p=u;return typeof u!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof u>"u"&&(p="my-masonry-grid")),w.createElement("div",oe({},h,{className:p}),this.renderColumns())}}Ae.defaultProps=Ht;const Re=({setBgColor:e})=>{const n=["#ef4444","#3b82f6","#22c55e","#eab308"],t=(r,l)=>{e(r),l()};return b.jsxs(Nt,{children:[b.jsx(Ne,{className:"block cursor-pointer text-sm/6 text-gray-500 focus:outline-none data-[active]:text-black data-[hover]:text-black",children:b.jsx(Dt,{className:"size-4"})}),b.jsx(_e,{transition:!0,anchor:"right",className:"z-10 ml-2 flex gap-2 transition [--anchor-gap:var(--spacing-5)] data-[closed]:-translate-y-1 data-[closed]:opacity-0",children:({close:r})=>b.jsxs(b.Fragment,{children:[n.map(l=>b.jsx("button",{className:"inline-block size-4 cursor-pointer rounded-full",style:{backgroundColor:l},onClick:()=>t(l,r)},l)),b.jsx("button",{className:"inline-block size-4 cursor-pointer rounded-full",onClick:()=>t("",r),children:b.jsx(At,{})})]})})]})},zt=({isOpen:e,close:n,data:t,apiGetMemoList:r})=>{const[l,i]=s.useState(""),[d,u]=s.useState(""),{mutateAsync:h,isPending:p}=qt(),a=async()=>{const C={content:l,color:d,_id:t==null?void 0:t._id};await h(C)&&(r(),v())},{mutateAsync:P,isPending:y}=Zt(),S=async()=>{if(!window.confirm("確定要刪除嗎?")||!(t!=null&&t._id))return;await P(t==null?void 0:t._id)&&(r(),v())};s.useEffect(()=>{!t||!e||(i(t==null?void 0:t.content),u(t==null?void 0:t.color))},[e,t]);const v=()=>{n(),i(""),u("")};return b.jsx(tt,{isOpen:e,close:v,children:b.jsxs("form",{children:[b.jsx("div",{className:"mb-4 text-center text-2xl font-bold text-blue-800",children:"編輯便條紙"}),b.jsx(Oe,{id:"life-memo",value:l,setValue:i,placeholder:"新增便條紙..",autoHeight:!0,style:{backgroundColor:d}}),b.jsx(Re,{setBgColor:u}),b.jsxs("div",{className:"mt-8 flex justify-evenly",children:[b.jsx(ce,{isLoading:p||y,disabled:p||y,onClick:a,children:"送出"}),b.jsx(ce,{type:"danger",isLoading:p||y,disabled:p||y,onClick:S,children:"刪除"}),b.jsx(ce,{type:"info",onClick:v,children:"取消"})]})]})})},Qt={default:4,1024:3,768:2,640:1},ln=()=>{const[e,n]=s.useState(""),[t,r]=s.useState(""),[l,i]=s.useState(""),[d,u]=s.useState(null),h=v=>{i("edit"),u(p?p[v]:null)},{data:p,isLoading:a,refetch:P}=Kt(),{mutateAsync:y}=Lt(),S=async()=>{if(!e.trim()||!window.confirm("是否確認要新增?"))return;await y({content:e.trim(),color:t})&&(n(""),r(""),P())};return b.jsxs("main",{className:"p-4 pb-16",children:[b.jsx("h2",{className:"page-title mb-4",children:"便條紙"}),b.jsxs("div",{className:"mx-auto mb-4 w-96 max-w-full",children:[b.jsx(Oe,{id:"life-memo",value:e,setValue:n,placeholder:"新增便條紙..",autoHeight:!0,blurHandle:S,style:{backgroundColor:t}}),b.jsx(Re,{setBgColor:r})]}),b.jsx(Ge,{isLoading:a}),b.jsx(Ue,{isShow:!a,as:"div",children:b.jsx(Ae,{breakpointCols:Qt,className:"flex gap-4",columnClassName:"flex flex-col gap-4",children:p==null?void 0:p.map((v,C)=>b.jsx("div",{className:"max-h-[30rem] overflow-y-auto rounded border p-2 break-words",style:{backgroundColor:v.deleteTime?"#888":v.color},onClick:()=>h(C),children:b.jsx("div",{className:"whitespace-pre-wrap",children:v.content})},C))})}),b.jsx(zt,{isOpen:l==="edit",close:()=>i(""),data:d,apiGetMemoList:P})]})};export{ln as default};
