import{d as r,j as e,t as k,N as M,e as T,B as j,f as A}from"./index-BbfrBdY1.js";import{p as G,u as I,a as E,B as L,M as R}from"./ModalEdit-BMlzAoWf.js";import{B as D}from"./index-oes_aK7t.js";import{S as F}from"./index-CroiQAYo.js";import{B as O}from"./index-FYCqi3j7.js";import{a as V}from"./format-Btenk6eh.js";import{S as d}from"./index-DhWbtts1.js";import{M as H}from"./MutiSkeleton-Dfk1QHmB.js";import{a as J}from"./ChevronRightIcon-Yl-fpGKF.js";import"./validate-C1sTg8Ed.js";import"./index-BD0JxBUE.js";import"./focus-management-CwWo8Oc6.js";import"./bugs-T9fTwdCi.js";import"./use-active-press-CvnXLpNb.js";import"./field-vx8_HbXS.js";import"./label-DV6Ggf67.js";import"./use-resolve-button-type-D-KKwBfJ.js";import"./BaseSkeleton-lxMEONOK.js";const $="_content_ezm9d_1",q="_articleId_ezm9d_14",v={content:$,articleId:q},K=({data:t,className:c,isLoading:a})=>{var i;const n=r.useRef(null);return e.jsx("section",{className:k(["articleCard overflow-hidden rounded bg-red-50 p-4 whitespace-break-spaces shadow transition hover:shadow-xl",v.articleCard,c]),children:e.jsxs("article",{ref:n,children:[e.jsxs("div",{className:"mb-4 flex justify-between gap-4",children:[e.jsx(d,{className:"w-40",isLoading:a,children:e.jsx("h2",{className:"font-black text-red-700 sm:text-xl",children:t.name})}),e.jsx(d,{className:"w-20",isLoading:a,children:e.jsx("time",{className:"flex-shrink-0 text-right text-xs sm:text-sm",children:V(t.createTime,{onlyDate:!0})})})]}),e.jsx(H,{isLoading:a,children:e.jsx("div",{className:k(["line-clamp-6 overflow-hidden overflow-ellipsis",v.content]),dangerouslySetInnerHTML:{__html:G.sanitize(t.content)}})}),e.jsx("div",{className:"my-2 flex justify-end",children:e.jsx(d,{className:"w-20",isLoading:a,children:e.jsxs(M,{to:`/article/${t._id}`,className:"flex w-max items-center text-red-400 underline",title:t.name,children:["閱讀更多",e.jsx(J,{className:"size-4"})]})})}),e.jsx(d,{className:"mt-4 w-80",isLoading:a,children:e.jsx("div",{className:"flex flex-wrap gap-4",children:(i=t==null?void 0:t.sorts)==null?void 0:i.map((o,m)=>e.jsxs("span",{className:"text-blue-800",children:["#",o]},m))})})]})})},xe=()=>{var g;const t=T(s=>s.accessToken),[c,a]=r.useState(""),{data:n}=I(),i=()=>n?n.map(s=>({name:s.name,value:s.name})):[],[o,m]=r.useState(""),[x,N]=r.useState([]),[S,y]=r.useState({}),w=()=>{u(1),y({name:o||void 0,sorts:x.length?JSON.stringify(x):void 0})},B=()=>{m(""),N([])},[h,_]=r.useState(1),[p,C]=r.useState(10),u=s=>{A({target:".article-list"}),_(s)},P=s=>{C(s),u(1)},{data:l={list:[{},{},{},{},{}]},isLoading:b,refetch:f}=E({page:h-1,size:p,name:S.name??void 0,sorts:S.sorts??void 0});return r.useEffect(()=>{f()},[h,f,p]),e.jsxs("main",{className:"p-4 pb-16",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"page-title",children:"文章"}),t&&e.jsx(j,{onClick:()=>a("add"),children:"新增"})]}),e.jsxs(F,{children:[e.jsx(D,{id:"life-article-name",label:"文章名稱",value:o,setValue:m,placeholder:"請輸入文章名稱",enter:w}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"base-label",children:"分類"}),e.jsx(L,{checkboxList:i(),value:x,setValue:N})]}),e.jsx(j,{onClick:w,children:"搜尋"}),e.jsx(j,{className:"ml-4",type:"info",onClick:B,children:"重置"})]}),e.jsx("section",{className:"article-list scroll-mt-18",children:(g=l==null?void 0:l.list)==null?void 0:g.map((s,z)=>e.jsx(K,{className:"my-4",data:s,isLoading:b},s._id||z))}),e.jsx(O,{nowPage:h,size:p,totalPage:Number((l==null?void 0:l.totalPage)??0),changePage:u,changeSize:P,isLoading:b}),e.jsx(R,{isOpen:c==="add",close:()=>a(""),type:c,apiGetArticle:f})]})};export{xe as default};
