import{g as r,j as e,t as g,N as M,u as T,B as p,h as A}from"./index-ZmCP8L0s.js";import{p as G,u as I,a as L,B as R,M as E}from"./ModalEdit-DnbIyzHC.js";import{B as D}from"./index-D6RcT6RW.js";import{S as F}from"./index-Bjsotkb-.js";import{B as O}from"./index-klQ40BD6.js";import{a as V}from"./format-DFDMiaYQ.js";import{S as d}from"./index-BJUMnAG1.js";import{M as H}from"./MutiSkeleton-D8mfzlZF.js";import{a as J}from"./ChevronRightIcon-Ci4atPYg.js";import"./validate-C1sTg8Ed.js";import"./index-BLb81hyZ.js";import"./focus-management-DyVfTjYv.js";import"./bugs-CmSmUzuL.js";import"./use-active-press-Bf2Uohjx.js";import"./field-B_LeM9YR.js";import"./label-Ay3-mu1q.js";import"./use-resolve-button-type-DimFILTU.js";import"./BaseSkeleton-DteRWsUG.js";const $="_content_ezm9d_1",q="_articleId_ezm9d_14",k={content:$,articleId:q},K=({data:t,className:c,isLoading:a})=>{var i;const n=r.useRef(null);return e.jsx("section",{className:g(["articleCard overflow-hidden rounded bg-red-50 p-4 whitespace-break-spaces shadow transition hover:shadow-xl",k.articleCard,c]),children:e.jsxs("article",{ref:n,children:[e.jsxs("div",{className:"mb-4 flex justify-between gap-4",children:[e.jsx(d,{className:"w-40",isLoading:a,children:e.jsx("h2",{className:"font-black text-red-700 sm:text-xl",children:t.name})}),e.jsx(d,{className:"w-20",isLoading:a,children:e.jsx("time",{className:"flex-shrink-0 text-right text-xs sm:text-sm",children:V(t.createTime,{onlyDate:!0})})})]}),e.jsx(H,{isLoading:a,children:e.jsx("div",{className:g(["line-clamp-6 overflow-hidden overflow-ellipsis",k.content]),dangerouslySetInnerHTML:{__html:G.sanitize(t.content)}})}),e.jsx("div",{className:"my-2 flex justify-end",children:e.jsx(d,{className:"w-20",isLoading:a,children:e.jsxs(M,{to:`/article/${t._id}`,className:"flex w-max items-center text-red-400 underline",title:t.name,children:["閱讀更多",e.jsx(J,{className:"size-4"})]})})}),e.jsx(d,{className:"mt-4 w-80",isLoading:a,children:e.jsx("div",{className:"flex flex-wrap gap-4",children:(i=t==null?void 0:t.sorts)==null?void 0:i.map((o,m)=>e.jsxs("span",{className:"text-blue-800",children:["#",o]},m))})})]})})},xe=()=>{var b;const t=T(s=>s.accessToken),[c,a]=r.useState(""),{data:n}=I(),i=()=>n?n.map(s=>({name:s.name,value:s.name})):[],[o,m]=r.useState(""),[x,u]=r.useState([]),[f,v]=r.useState({}),j=()=>{h(1),v({name:o||void 0,sorts:x.length?JSON.stringify(x):void 0})},y=()=>{m(""),u([])},[N,B]=r.useState(1),[S,_]=r.useState(10),h=s=>{A({target:".article-list"}),B(s)},C=s=>{_(s),h(1)},{data:l={list:[{},{},{},{},{}]},isLoading:w,refetch:P}=L({page:N-1,size:S,name:f.name??void 0,sorts:f.sorts??void 0});return e.jsxs("main",{className:"p-4 pb-16",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"page-title",children:"文章"}),t&&e.jsx(p,{onClick:()=>a("add"),children:"新增"})]}),e.jsxs(F,{children:[e.jsx(D,{id:"life-article-name",label:"文章名稱",value:o,setValue:m,placeholder:"請輸入文章名稱",enter:j}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"base-label",children:"分類"}),e.jsx(R,{checkboxList:i(),value:x,setValue:u})]}),e.jsx(p,{onClick:j,children:"搜尋"}),e.jsx(p,{className:"ml-4",type:"info",onClick:y,children:"重置"})]}),e.jsx("section",{className:"article-list scroll-mt-18",children:(b=l==null?void 0:l.list)==null?void 0:b.map((s,z)=>e.jsx(K,{className:"my-4",data:s,isLoading:w},s._id||z))}),e.jsx(O,{nowPage:N,size:S,totalPage:Number((l==null?void 0:l.totalPage)??0),changePage:h,changeSize:C,isLoading:w}),e.jsx(E,{isOpen:c==="add",close:()=>a(""),type:c,apiGetArticle:P})]})};export{xe as default};
