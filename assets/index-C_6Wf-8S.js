import{d as r,j as e,N as z,B as f,e as C}from"./index-CEMpsM91.js";import{p as M,u as A,a as G,B as I,M as E}from"./ModalEdit-CI_OLV0J.js";import{B as L}from"./index-Cbi0vlqJ.js";import{S as R}from"./index-CPzA5FiS.js";import{B as T}from"./index-DybJ-JXr.js";import{a as $}from"./format-Btenk6eh.js";import{S as m}from"./index-BRL88GbM.js";import{M as D}from"./MutiSkeleton-ClObesOM.js";import{a as F}from"./ChevronRightIcon-CRLkhsfY.js";import"./validate-C1sTg8Ed.js";import"./constant-RaoDFmaB.js";import"./index-DA4Sll2E.js";import"./focus-management-DHOR56n7.js";import"./field-BAbt5j_0.js";import"./BaseSkeleton-CSobE6pa.js";const O="_content_ezm9d_1",V="_articleId_ezm9d_14",g={content:O,articleId:V},H=({data:s,className:i,isLoading:a})=>{var c;const d=r.useRef(null);return e.jsx("section",{className:`articleCard overflow-hidden rounded bg-red-50 p-4 whitespace-break-spaces shadow transition hover:shadow-xl ${g.articleCard} ${i}`,children:e.jsxs("article",{ref:d,children:[e.jsxs("div",{className:"mb-4 flex justify-between gap-4",children:[e.jsx(m,{className:"!w-40",isLoading:a,children:e.jsx("h2",{className:"font-black text-red-700 sm:text-xl",children:s.name})}),e.jsx(m,{className:"!w-20",isLoading:a,children:e.jsx("time",{className:"flex-shrink-0 text-right text-xs sm:text-sm",children:$(s.createTime,{onlyDate:!0})})})]}),e.jsx(D,{isLoading:a,children:e.jsx("div",{className:`line-clamp-6 overflow-hidden overflow-ellipsis ${g.content}`,dangerouslySetInnerHTML:{__html:M.sanitize(s.content)}})}),e.jsx("div",{className:"my-2 flex justify-end",children:e.jsx(m,{className:"!w-20",isLoading:a,children:e.jsxs(z,{to:`/article/${s._id}`,className:"flex w-max items-center text-red-400 underline",title:s.name,children:["閱讀更多",e.jsx(F,{className:"size-4"})]})})}),e.jsx(m,{className:"mt-4 !w-80",isLoading:a,children:e.jsx("div",{className:"flex flex-wrap gap-4",children:(c=s==null?void 0:s.sorts)==null?void 0:c.map((o,n)=>e.jsxs("span",{className:"text-blue-800",children:["#",o]},n))})})]})})},ce=()=>{var w;const[s,i]=r.useState(""),{data:a}=A(),d=()=>a?a.map(t=>({name:t.name,value:t.name})):[],[c,o]=r.useState(""),[n,j]=r.useState([]),[N,v]=r.useState({}),S=()=>{p(1),v({name:c||void 0,sorts:n.length?JSON.stringify(n):void 0})},y=()=>{o(""),j([])},[x,k]=r.useState(1),[h,B]=r.useState(10),p=t=>{C({target:".article-list"}),k(t)},_=t=>{B(t),p(1)},{data:l={list:[{},{},{},{},{}]},isLoading:b,refetch:u}=G({page:x-1,size:h,name:N.name??void 0,sorts:N.sorts??void 0});return r.useEffect(()=>{u()},[x,u,h]),e.jsxs("main",{className:"p-4 pb-16",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"page-title",children:"文章"}),e.jsx(f,{onClick:()=>i("add"),children:"新增"})]}),e.jsxs(R,{children:[e.jsx(L,{id:"life-article-name",label:"文章名稱",value:c,setValue:o,placeholder:"請輸入文章名稱",enter:S}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"base-label",children:"分類"}),e.jsx(I,{checkboxList:d(),value:n,setValue:j})]}),e.jsx(f,{onClick:S,children:"搜尋"}),e.jsx(f,{className:"ml-4",type:"info",onClick:y,children:"重置"})]}),e.jsx("section",{className:"article-list scroll-mt-18",children:(w=l==null?void 0:l.list)==null?void 0:w.map((t,P)=>e.jsx(H,{className:"my-4",data:t,isLoading:b},t._id||P))}),e.jsx(T,{nowPage:x,size:h,totalPage:Number((l==null?void 0:l.totalPage)??0),changePage:p,changeSize:_,isLoading:b}),e.jsx(E,{isOpen:s==="add",close:()=>i(""),type:s,apiGetArticle:u})]})};export{ce as default};
