import{g as a,O as re,K as X,y as J,l as De,m as xe,o as I,L as ne,R as w,n as Le,p as U,q as Y,_ as pe,v as Ie,x as ke,w as $e,z as Ke,C as qe,e as ve,d as Ze,r as le,A as se,s as he,j as b,B as ce,u as Ge,E as Ue,F as We}from"./index-BJ6_LvSw.js";import{B as Oe}from"./index-CNbW0PKn.js";import{n as ye,t as ze,b as He,R as Qe,E as Ve,a as Je,O as Me,C as Ye,u as je,m as Xe,f as et,r as tt,c as D,B as nt}from"./index-DVqskYiS.js";import{$ as rt,a as ot,r as Be}from"./bugs-CDvCY-OQ.js";import{w as lt}from"./use-active-press-6ZUK9lsE.js";import{M as st,y as at,x as ut,R as it,b as ct,d as dt}from"./floating-BUK6kAa3.js";import{e as pt}from"./use-resolve-button-type-BvuWSig1.js";import{b as Ce,f as fe,s as me,P as G,F as L,A as ft,h as mt,o as Z,u as bt,T as be}from"./focus-management-Cn7Nkfhq.js";import"./floating-ui.react-dom-Ck9qv3eO.js";var vt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(vt||{}),ht=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(ht||{});let yt={0:e=>({...e,popoverState:U(e.popoverState,{0:1,1:0}),__demoMode:!1}),1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,n){return e.button===n.button?e:{...e,button:n.button}},3(e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},4(e,n){return e.panel===n.panel?e:{...e,panel:n.panel}},5(e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}},ge=a.createContext(null);ge.displayName="PopoverContext";function ae(e){let n=a.useContext(ge);if(n===null){let t=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ae),t}return n}let ue=a.createContext(null);ue.displayName="PopoverAPIContext";function Pe(e){let n=a.useContext(ue);if(n===null){let t=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Pe),t}return n}let we=a.createContext(null);we.displayName="PopoverGroupContext";function Te(){return a.useContext(we)}let ie=a.createContext(null);ie.displayName="PopoverPanelContext";function Ct(){return a.useContext(ie)}function gt(e,n){return U(n.type,yt,e,n)}let Pt="div";function wt(e,n){var t;let{__demoMode:r=!1,...o}=e,i=a.useRef(null),d=J(n,De(p=>{i.current=p})),u=a.useRef([]),h=a.useReducer(gt,{__demoMode:r,popoverState:r?0:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:a.createRef(),afterPanelSentinel:a.createRef(),afterButtonSentinel:a.createRef()}),[{popoverState:y,button:l,buttonId:g,panel:v,panelId:x,beforePanelSentinel:P,afterPanelSentinel:f,afterButtonSentinel:c},S]=h,E=ye((t=i.current)!=null?t:l),B=a.useMemo(()=>{if(!l||!v)return!1;for(let k of document.querySelectorAll("body > *"))if(Number(k==null?void 0:k.contains(l))^Number(k==null?void 0:k.contains(v)))return!0;let p=Ce(),s=p.indexOf(l),C=(s+p.length-1)%p.length,m=(s+1)%p.length,O=p[C],j=p[m];return!v.contains(O)&&!v.contains(j)},[l,v]),T=xe(g),F=xe(x),W=a.useMemo(()=>({buttonId:T,panelId:F,close:()=>S({type:1})}),[T,F,S]),N=Te(),$=N==null?void 0:N.registerPopover,K=I(()=>{var p;return(p=N==null?void 0:N.isFocusWithinPopoverGroup())!=null?p:(E==null?void 0:E.activeElement)&&((l==null?void 0:l.contains(E.activeElement))||(v==null?void 0:v.contains(E.activeElement)))});a.useEffect(()=>$==null?void 0:$(W),[$,W]);let[M,z]=ze(),q=He(l),_=Qe({mainTreeNode:q,portals:M,defaultContainers:[l,v]});Ve(E==null?void 0:E.defaultView,"focus",p=>{var s,C,m,O,j,k;p.target!==window&&p.target instanceof HTMLElement&&y===0&&(K()||l&&v&&(_.contains(p.target)||(C=(s=P.current)==null?void 0:s.contains)!=null&&C.call(s,p.target)||(O=(m=f.current)==null?void 0:m.contains)!=null&&O.call(m,p.target)||(k=(j=c.current)==null?void 0:j.contains)!=null&&k.call(j,p.target)||S({type:1})))},!0),Je(y===0,_.resolveContainers,(p,s)=>{S({type:1}),ft(s,mt.Loose)||(p.preventDefault(),l==null||l.focus())});let A=I(p=>{S({type:1});let s=p?p instanceof HTMLElement?p:"current"in p&&p.current instanceof HTMLElement?p.current:l:l;s==null||s.focus()}),H=a.useMemo(()=>({close:A,isPortalled:B}),[A,B]),Q=a.useMemo(()=>({open:y===0,close:A}),[y,A]),V={ref:d},ee=ne();return w.createElement(Me,{node:q},w.createElement(st,null,w.createElement(ie.Provider,{value:null},w.createElement(ge.Provider,{value:h},w.createElement(ue.Provider,{value:H},w.createElement(Ye,{value:A},w.createElement(Le,{value:U(y,{0:Y.Open,1:Y.Closed})},w.createElement(z,null,ee({ourProps:V,theirProps:o,slot:Q,defaultTag:Pt,name:"Popover"})))))))))}let St="button";function xt(e,n){let t=a.useId(),{id:r=`headlessui-popover-button-${t}`,disabled:o=!1,autoFocus:i=!1,...d}=e,[u,h]=ae("Popover.Button"),{isPortalled:y}=Pe("Popover.Button"),l=a.useRef(null),g=`headlessui-focus-sentinel-${a.useId()}`,v=Te(),x=v==null?void 0:v.closeOthers,P=Ct()!==null;a.useEffect(()=>{if(!P)return h({type:3,buttonId:r}),()=>{h({type:3,buttonId:null})}},[P,r,h]);let[f]=a.useState(()=>Symbol()),c=J(l,n,at(),I(s=>{if(!P){if(s)u.buttons.current.push(f);else{let C=u.buttons.current.indexOf(f);C!==-1&&u.buttons.current.splice(C,1)}u.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),s&&h({type:2,button:s})}})),S=J(l,n),E=ye(l),B=I(s=>{var C,m,O;if(P){if(u.popoverState===1)return;switch(s.key){case Z.Space:case Z.Enter:s.preventDefault(),(m=(C=s.target).click)==null||m.call(C),h({type:1}),(O=u.button)==null||O.focus();break}}else switch(s.key){case Z.Space:case Z.Enter:s.preventDefault(),s.stopPropagation(),u.popoverState===1&&(x==null||x(u.buttonId)),h({type:0});break;case Z.Escape:if(u.popoverState!==0)return x==null?void 0:x(u.buttonId);if(!l.current||E!=null&&E.activeElement&&!l.current.contains(E.activeElement))return;s.preventDefault(),s.stopPropagation(),h({type:1});break}}),T=I(s=>{P||s.key===Z.Space&&s.preventDefault()}),F=I(s=>{var C,m;Be(s.currentTarget)||o||(P?(h({type:1}),(C=u.button)==null||C.focus()):(s.preventDefault(),s.stopPropagation(),u.popoverState===1&&(x==null||x(u.buttonId)),h({type:0}),(m=u.button)==null||m.focus()))}),W=I(s=>{s.preventDefault(),s.stopPropagation()}),{isFocusVisible:N,focusProps:$}=rt({autoFocus:i}),{isHovered:K,hoverProps:M}=ot({isDisabled:o}),{pressed:z,pressProps:q}=lt({disabled:o}),_=u.popoverState===0,A=a.useMemo(()=>({open:_,active:z||_,disabled:o,hover:K,focus:N,autofocus:i}),[_,K,N,z,o,i]),H=pt(e,u.button),Q=P?pe({ref:S,type:H,onKeyDown:B,onClick:F,disabled:o||void 0,autoFocus:i},$,M,q):pe({ref:c,id:u.buttonId,type:H,"aria-expanded":u.popoverState===0,"aria-controls":u.panel?u.panelId:void 0,disabled:o||void 0,autoFocus:i,onKeyDown:B,onKeyUp:T,onClick:F,onMouseDown:W},$,M,q),V=je(),ee=I(()=>{let s=u.panel;if(!s)return;function C(){U(V.current,{[D.Forwards]:()=>G(s,L.First),[D.Backwards]:()=>G(s,L.Last)})===be.Error&&G(Ce().filter(m=>m.dataset.headlessuiFocusGuard!=="true"),U(V.current,{[D.Forwards]:L.Next,[D.Backwards]:L.Previous}),{relativeTo:u.button})}C()}),p=ne();return w.createElement(w.Fragment,null,p({ourProps:Q,theirProps:d,slot:A,defaultTag:St,name:"Popover.Button"}),_&&!P&&y&&w.createElement(fe,{id:g,ref:u.afterButtonSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:ee}))}let Et="div",It=re.RenderStrategy|re.Static;function Fe(e,n){let t=a.useId(),{id:r=`headlessui-popover-backdrop-${t}`,transition:o=!1,...i}=e,[{popoverState:d},u]=ae("Popover.Backdrop"),[h,y]=a.useState(null),l=J(n,y),g=Ie(),[v,x]=ke(o,h,g!==null?(g&Y.Open)===Y.Open:d===0),P=I(S=>{if(Be(S.currentTarget))return S.preventDefault();u({type:1})}),f=a.useMemo(()=>({open:d===0}),[d]),c={ref:l,id:r,"aria-hidden":!0,onClick:P,...$e(x)};return ne()({ourProps:c,theirProps:i,slot:f,defaultTag:Et,features:It,visible:v,name:"Popover.Backdrop"})}let kt="div",$t=re.RenderStrategy|re.Static;function Ot(e,n){let t=a.useId(),{id:r=`headlessui-popover-panel-${t}`,focus:o=!1,anchor:i,portal:d=!1,modal:u=!1,transition:h=!1,...y}=e,[l,g]=ae("Popover.Panel"),{close:v,isPortalled:x}=Pe("Popover.Panel"),P=`headlessui-focus-sentinel-before-${t}`,f=`headlessui-focus-sentinel-after-${t}`,c=a.useRef(null),S=ut(i),[E,B]=it(S),T=ct();S&&(d=!0);let[F,W]=a.useState(null),N=J(c,n,S?E:null,I(s=>g({type:4,panel:s})),W),$=ye(c);Ke(()=>(g({type:5,panelId:r}),()=>{g({type:5,panelId:null})}),[r,g]);let K=Ie(),[M,z]=ke(h,F,K!==null?(K&Y.Open)===Y.Open:l.popoverState===0);Xe(M,l.button,()=>{g({type:1})});let q=l.__demoMode?!1:u&&M;et(q,$);let _=I(s=>{var C;switch(s.key){case Z.Escape:if(l.popoverState!==0||!c.current||$!=null&&$.activeElement&&!c.current.contains($.activeElement))return;s.preventDefault(),s.stopPropagation(),g({type:1}),(C=l.button)==null||C.focus();break}});a.useEffect(()=>{var s;e.static||l.popoverState===1&&((s=e.unmount)==null||s)&&g({type:4,panel:null})},[l.popoverState,e.unmount,e.static,g]),a.useEffect(()=>{if(l.__demoMode||!o||l.popoverState!==0||!c.current)return;let s=$==null?void 0:$.activeElement;c.current.contains(s)||G(c.current,L.First)},[l.__demoMode,o,c.current,l.popoverState]);let A=a.useMemo(()=>({open:l.popoverState===0,close:v}),[l.popoverState,v]),H=pe(S?T():{},{ref:N,id:r,onKeyDown:_,onBlur:o&&l.popoverState===0?s=>{var C,m,O,j,k;let R=s.relatedTarget;R&&c.current&&((C=c.current)!=null&&C.contains(R)||(g({type:1}),((O=(m=l.beforePanelSentinel.current)==null?void 0:m.contains)!=null&&O.call(m,R)||(k=(j=l.afterPanelSentinel.current)==null?void 0:j.contains)!=null&&k.call(j,R))&&R.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...y.style,...B,"--button-width":dt(l.button,!0).width},...$e(z)}),Q=je(),V=I(()=>{let s=c.current;if(!s)return;function C(){U(Q.current,{[D.Forwards]:()=>{var m;G(s,L.First)===be.Error&&((m=l.afterPanelSentinel.current)==null||m.focus())},[D.Backwards]:()=>{var m;(m=l.button)==null||m.focus({preventScroll:!0})}})}C()}),ee=I(()=>{let s=c.current;if(!s)return;function C(){U(Q.current,{[D.Forwards]:()=>{if(!l.button)return;let m=Ce(),O=m.indexOf(l.button),j=m.slice(0,O+1),k=[...m.slice(O+1),...j];for(let R of k.slice())if(R.dataset.headlessuiFocusGuard==="true"||F!=null&&F.contains(R)){let Se=k.indexOf(R);Se!==-1&&k.splice(Se,1)}G(k,L.First,{sorted:!1})},[D.Backwards]:()=>{var m;G(s,L.Previous)===be.Error&&((m=l.button)==null||m.focus())}})}C()}),p=ne();return w.createElement(qe,null,w.createElement(ie.Provider,{value:r},w.createElement(ue.Provider,{value:{close:v,isPortalled:x}},w.createElement(tt,{enabled:d?e.static||M:!1},M&&x&&w.createElement(fe,{id:P,ref:l.beforePanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:V}),p({ourProps:H,theirProps:y,slot:A,defaultTag:kt,features:$t,visible:M,name:"Popover.Panel"}),M&&x&&w.createElement(fe,{id:f,ref:l.afterPanelSentinel,features:me.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:ee})))))}let Mt="div";function jt(e,n){let t=a.useRef(null),r=J(t,n),[o,i]=a.useState([]),d=I(f=>{i(c=>{let S=c.indexOf(f);if(S!==-1){let E=c.slice();return E.splice(S,1),E}return c})}),u=I(f=>(i(c=>[...c,f]),()=>d(f))),h=I(()=>{var f;let c=bt(t);if(!c)return!1;let S=c.activeElement;return(f=t.current)!=null&&f.contains(S)?!0:o.some(E=>{var B,T;return((B=c.getElementById(E.buttonId.current))==null?void 0:B.contains(S))||((T=c.getElementById(E.panelId.current))==null?void 0:T.contains(S))})}),y=I(f=>{for(let c of o)c.buttonId.current!==f&&c.close()}),l=a.useMemo(()=>({registerPopover:u,unregisterPopover:d,isFocusWithinPopoverGroup:h,closeOthers:y}),[u,d,h,y]),g=a.useMemo(()=>({}),[]),v=e,x={ref:r},P=ne();return w.createElement(Me,null,w.createElement(we.Provider,{value:l},P({ourProps:x,theirProps:v,slot:g,defaultTag:Mt,name:"Popover.Group"})))}let Bt=X(wt),Ne=X(xt),Tt=X(Fe),Ft=X(Fe),_e=X(Ot),Nt=X(jt),_t=Object.assign(Bt,{Button:Ne,Backdrop:Ft,Overlay:Tt,Panel:_e,Group:Nt});function At({title:e,titleId:n,...t},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},t),e?a.createElement("title",{id:n},e):null,a.createElement("path",{fillRule:"evenodd",d:"m6.72 5.66 11.62 11.62A8.25 8.25 0 0 0 6.72 5.66Zm10.56 12.68L5.66 6.72a8.25 8.25 0 0 0 11.62 11.62ZM5.105 5.106c3.807-3.808 9.98-3.808 13.788 0 3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788Z",clipRule:"evenodd"}))}const Rt=a.forwardRef(At);function Dt({title:e,titleId:n,...t},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},t),e?a.createElement("title",{id:n},e):null,a.createElement("path",{fillRule:"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z",clipRule:"evenodd"}))}const Lt=a.forwardRef(Dt),Kt=()=>ve({mutationKey:["addMemoItem"],mutationFn:async e=>await le({method:"post",url:`${se}/memo`,data:e})?(he.success("新增成功"),!0):!1,scope:{id:"addMemoItem"}}),qt=()=>Ze({queryKey:["memoList"],queryFn:async({signal:e})=>{const n=await le(`${se}/memo/list`,{signal:e});return n==null?void 0:n.list},staleTime:1e3*60*60,gcTime:1e3*60*60}),Zt=()=>ve({mutationKey:["editMemoItem"],mutationFn:async e=>await le({method:"patch",url:`${se}/memo?_id=${e._id}`,data:e})?(he.success("編輯成功"),!0):!1,scope:{id:"editMemoItem"}}),Gt=()=>ve({mutationKey:["deleteMemoItem"],mutationFn:async e=>await le({method:"delete",url:`${se}/memo?_id=${e}`})?(he.success("刪除成功"),!0):!1,scope:{id:"deleteMemoItem"}});function Ut(e,n){if(e==null)return{};var t=Wt(e,n),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function Wt(e,n){if(e==null)return{};var t={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(n.indexOf(o)>=0)&&(t[o]=e[o]);return t}function oe(){return oe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oe.apply(this,arguments)}function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ee(Object(t),!0).forEach(function(r){zt(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function zt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const Ht={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},de=2;class Ae extends w.Component{constructor(n){super(n),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let t;this.props.breakpointCols&&this.props.breakpointCols.default?t=this.props.breakpointCols.default:t=parseInt(this.props.breakpointCols)||de,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const n=window&&window.innerWidth||1/0;let t=this.props.breakpointCols;typeof t!="object"&&(t={default:parseInt(t)||de});let r=1/0,o=t.default||de;for(let i in t){const d=parseInt(i);d>0&&n<=d&&d<r&&(r=d,o=t[i])}o=Math.max(1,parseInt(o)||1),this.state.columnCount!==o&&this.setState({columnCount:o})}itemsInColumns(){const n=this.state.columnCount,t=new Array(n),r=w.Children.toArray(this.props.children);for(let o=0;o<r.length;o++){const i=o%n;t[i]||(t[i]=[]),t[i].push(r[o])}return t}renderColumns(){const{column:n,columnAttrs:t={},columnClassName:r}=this.props,o=this.itemsInColumns(),i=`${100/o.length}%`;let d=r;d&&typeof d!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof d>"u"&&(d="my-masonry-grid_column"));const u=te(te(te({},n),t),{},{style:te(te({},t.style),{},{width:i}),className:d});return o.map((h,y)=>w.createElement("div",oe({},u,{key:y}),h))}logDeprecated(n){console.error("[Masonry]",n)}render(){const n=this.props,{children:t,breakpointCols:r,columnClassName:o,columnAttrs:i,column:d,className:u}=n,h=Ut(n,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let y=u;return typeof u!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof u>"u"&&(y="my-masonry-grid")),w.createElement("div",oe({},h,{className:y}),this.renderColumns())}}Ae.defaultProps=Ht;const Re=({setBgColor:e})=>{const n=["#ef4444","#3b82f6","#22c55e","#eab308"],t=(r,o)=>{e(r),o()};return b.jsxs(_t,{children:[b.jsx(Ne,{className:"block cursor-pointer text-sm/6 text-gray-500 focus:outline-none data-[active]:text-black data-[hover]:text-black",children:b.jsx(Lt,{className:"size-4"})}),b.jsx(_e,{transition:!0,anchor:"right",className:"z-10 ml-2 flex gap-2 transition [--anchor-gap:var(--spacing-5)] data-[closed]:-translate-y-1 data-[closed]:opacity-0",children:({close:r})=>b.jsxs(b.Fragment,{children:[n.map(o=>b.jsx("button",{className:"inline-block size-4 cursor-pointer rounded-full",style:{backgroundColor:o},onClick:()=>t(o,r)},o)),b.jsx("button",{className:"inline-block size-4 cursor-pointer rounded-full",onClick:()=>t("",r),children:b.jsx(Rt,{})})]})})]})},Qt=({isOpen:e,close:n,data:t,apiGetMemoList:r})=>{const[o,i]=a.useState(""),[d,u]=a.useState(""),{mutateAsync:h,isPending:y}=Zt(),l=async()=>{const f={content:o,color:d,_id:t==null?void 0:t._id};await h(f)&&(r(),P())},{mutateAsync:g,isPending:v}=Gt(),x=async()=>{if(!window.confirm("確定要刪除嗎?")||!(t!=null&&t._id))return;await g(t==null?void 0:t._id)&&(r(),P())};a.useEffect(()=>{!t||!e||(i(t==null?void 0:t.content),u(t==null?void 0:t.color))},[e,t]);const P=()=>{n(),i(""),u("")};return b.jsx(nt,{isOpen:e,close:P,children:b.jsxs("form",{children:[b.jsx("div",{className:"mb-4 text-center text-2xl font-bold text-blue-800",children:"編輯便條紙"}),b.jsx(Oe,{id:"life-memo",value:o,setValue:i,placeholder:"新增便條紙..",autoHeight:!0,style:{backgroundColor:d}}),b.jsx(Re,{setBgColor:u}),b.jsxs("div",{className:"mt-8 flex justify-evenly",children:[b.jsx(ce,{isLoading:y||v,disabled:y||v,onClick:l,children:"送出"}),b.jsx(ce,{type:"danger",isLoading:y||v,disabled:y||v,onClick:x,children:"刪除"}),b.jsx(ce,{type:"info",onClick:P,children:"取消"})]})]})})},Vt={default:4,1024:3,768:2,640:1},sn=()=>{const e=Ge(f=>f.accessToken),[n,t]=a.useState(""),[r,o]=a.useState(""),[i,d]=a.useState(""),[u,h]=a.useState(null),y=f=>{e&&(d("edit"),h(l?l[f]:null))},{data:l,isLoading:g,refetch:v}=qt(),{mutateAsync:x}=Kt(),P=async()=>{if(!n.trim()||!window.confirm("是否確認要新增?"))return;await x({content:n.trim(),color:r})&&(t(""),o(""),v())};return b.jsxs("main",{className:"p-4 pb-16",children:[b.jsx("h2",{className:"page-title mb-4",children:"便條紙"}),e&&b.jsxs("div",{className:"mx-auto mb-4 w-96 max-w-full",children:[b.jsx(Oe,{id:"life-memo",value:n,setValue:t,placeholder:"新增便條紙..",autoHeight:!0,blurHandle:P,style:{backgroundColor:r}}),b.jsx(Re,{setBgColor:o})]}),b.jsx(Ue,{isLoading:g}),b.jsx(We,{isShow:!g,as:"div",children:b.jsx(Ae,{breakpointCols:Vt,className:"flex gap-4",columnClassName:"flex flex-col gap-4",children:l==null?void 0:l.map((f,c)=>b.jsx("div",{className:"max-h-[30rem] overflow-y-auto rounded border p-2 break-words",style:{backgroundColor:f.deleteTime?"#888":f.color},onClick:()=>y(c),children:b.jsx("div",{className:"whitespace-pre-wrap",children:f.content})},c))})}),b.jsx(Qt,{isOpen:i==="edit",close:()=>d(""),data:u,apiGetMemoList:v})]})};export{sn as default};
