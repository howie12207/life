import{g as j,j as e,Y as $,Z as B,$ as S,t as i,E as D,B as z,a0 as F,a1 as w}from"./index-zUY89gjX.js";import{f as g,a as m}from"./index-dpAWaH1g.js";import{F as R}from"./PencilSquareIcon-CkDltr77.js";function d({title:c,titleId:l,...a},t){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},a),c?j.createElement("title",{id:l},c):null,j.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l2.47-2.47a.75.75 0 1 1 1.06 1.06l-3.75 3.75a.75.75 0 0 1-1.06 0l-3.75-3.75a.75.75 0 1 1 1.06-1.06l2.47 2.47V3a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const A=j.forwardRef(d),K=j.memo(({headList:c,data:l,customClick:a,isLoading:t,lineThrough:f,trClass:b})=>{const u=()=>e.jsx("tr",{children:e.jsx("td",{colSpan:(c==null?void 0:c.length)||100,className:"relative h-80",children:e.jsx(D,{isLoading:!!t,className:"size-8"})})}),k=()=>l==null?void 0:l.map((s,n)=>e.jsx("tr",{className:i(["border-b border-gray-400",(f==null?void 0:f(s))&&"line-through",b==null?void 0:b(s)]),children:c==null?void 0:c.map((r,p)=>{let x="";return r.type==="custom"&&r.customContent?x=r.customContent(s):r.key&&!r.type?x=`${s[r.key]}`:r.key&&r.type?r.type==="dollar"?x=`${g(Number(s[r.key]),{type:"dollar"})}`:r.type==="number"?x=`${g(Number(s[r.key]))}`:r.type==="datetime"?x=m(Number(s[r.key])):r.type==="time"?x=m(Number(s[r.key]),{onlyTime:!0}):r.type==="date"&&(x=m(Number(s[r.key]),{onlyDate:!0})):r.type==="operation"&&!(f!=null&&f(s))&&(x=e.jsx(z,{type:"icon",className:"text-blue-700",onClick:()=>a==null?void 0:a(r.clickType,n),children:e.jsxs(e.Fragment,{children:[r.clickType==="edit"&&e.jsx(R,{className:"size-4"}),r.clickType==="delete"&&e.jsx(F,{className:"size-4"})]})})),e.jsx("td",{className:i(["p-2 text-sm sm:p-4",r.type==="dollar"&&"text-right",r.className]),children:x},p)})},n)),y=()=>e.jsx("tr",{children:e.jsx("td",{colSpan:(c==null?void 0:c.length)||100,className:"relative h-20 text-center",children:"暫無資料"})});return e.jsx($,{mode:"wait",children:e.jsxs(B.tbody,{...S,children:[t&&e.jsx(u,{}),!t&&(l==null?void 0:l.length)===0&&e.jsx(y,{}),!t&&(l==null?void 0:l.length)!==0&&e.jsx(k,{})]},`${t}-${l==null?void 0:l.length}`)})}),M=j.memo(({headList:c,data:l,customClick:a,isLoading:t,useCard:f})=>{const b=()=>e.jsx("div",{className:"relative h-40",children:e.jsx(D,{isLoading:!!t,className:"size-8"})}),u=()=>l==null?void 0:l.map((y,s)=>e.jsx("div",{className:i(["relative my-2 grid grid-cols-2 gap-1 rounded bg-white shadow-xl","after:absolute after:top-0 after:right-0 after:bottom-0 after:left-0 after:m-auto after:h-[90%] after:w-0.5 after:bg-gray-400 after:content-['']"]),children:c==null?void 0:c.map((n,r)=>{let p="";return n.type==="custom"&&n.customContent?p=n.customContent(y):n.key&&!n.type?p=`${y[n.key]}`:n.key&&n.type?n.type==="dollar"?p=`${g(Number(y[n.key]),{type:"dollar"})}`:n.type==="number"?p=`${g(Number(y[n.key]))}`:n.type==="datetime"?p=m(Number(y[n.key])):n.type==="time"?p=m(Number(y[n.key]),{onlyTime:!0}):n.type==="date"&&(p=m(Number(y[n.key]),{onlyDate:!0})):n.type==="operation"&&(p=e.jsx(z,{type:"icon",className:"text-blue-700",onClick:()=>a==null?void 0:a(n.clickType,s),children:e.jsxs(e.Fragment,{children:[n.clickType==="edit"&&e.jsx(R,{className:"size-4"}),n.clickType==="delete"&&e.jsx(F,{className:"size-4"})]})})),e.jsxs("div",{className:i(["relative flex gap-1 p-2 text-sm"]),children:[e.jsx("div",{className:"flex-1 font-bold",children:n.name}),e.jsx("div",{className:"flex-1 text-right text-red-700",children:p})]},r)})},s)),k=()=>e.jsx("div",{className:"py-10 text-center",children:"暫無資料"});return e.jsx($,{mode:"wait",children:e.jsxs(B.div,{className:i(["hidden",f==="xl"&&"block xl:hidden",f==="lg"&&"block lg:hidden",f==="md"&&"block md:hidden",f==="sm"&&"block sm:hidden"]),...S,children:[t&&e.jsx(b,{}),!t&&(l==null?void 0:l.length)===0&&e.jsx(k,{}),!t&&(l==null?void 0:l.length)!==0&&e.jsx(u,{})]},`${t}-${l==null?void 0:l.length}`)})}),P=({headList:c,className:l,data:a,customClick:t,isLoading:f,lineThrough:b,trClass:u,notFixed:k,useCard:y})=>{const[s,n]=j.useState(""),[r,p]=j.useState("desc"),x=o=>!o.disabledSort&&o.type!=="operation"&&o.type!=="custom",E=o=>{x(o)&&(s!==o.key?(n(o.key),p("desc")):p(r==="asc"?"desc":"asc"))},v=s?[...a].sort((o,N)=>typeof o[s]=="string"&&typeof N[s]=="string"?r==="asc"?o[s].localeCompare(N[s]):N[s].localeCompare(o[s]):r==="asc"?o[s]-N[s]:N[s]-o[s]):a;return e.jsxs("div",{className:"base-table w-full scroll-mt-14",children:[e.jsxs("table",{className:w(["w-full",l,y&&"hidden",y==="xl"&&"xl:table",y==="lg"&&"lg:table",y==="md"&&"md:table",y==="sm"&&"sm:table"]),children:[e.jsx("thead",{className:w([!k&&"sticky top-14 z-10",'bg-gray-300 after:absolute after:h-0.5 after:w-full after:bg-gray-400 after:content-[""]']),children:e.jsx("tr",{children:c==null?void 0:c.map((o,N)=>e.jsxs("th",{className:w(["p-2 text-left text-xs text-nowrap sm:p-4 sm:text-sm",o.type==="dollar"&&"text-right",o.className,x(o)&&"cursor-pointer"]),onClick:()=>E(o),children:[o.name,x(o)&&e.jsx(A,{className:i(["inline-block size-4 transition-transform",s===o.key&&"text-red-500",s===o.key&&r==="asc"&&"rotate-180",s!==o.key&&"opacity-20"])})]},N))})}),e.jsx(K,{headList:c,data:v,customClick:t,isLoading:f,lineThrough:b,trClass:u})]}),e.jsx(M,{headList:c,data:v,customClick:t,isLoading:f,lineThrough:b,trClass:u,useCard:y})]})};export{P as B};
