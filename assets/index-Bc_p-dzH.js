import{d as r,j as e,N as C,e as M,B as j,f as T}from"./index-C_SaourX.js";import{p as A,u as G,a as I,B as E,M as L}from"./ModalEdit-BJFaG8c-.js";import{B as R}from"./index-CKdGVYno.js";import{S as $}from"./index-DsEFxqfi.js";import{B as D}from"./index-Cecah7EL.js";import{a as F}from"./format-Btenk6eh.js";import{S as d}from"./index-Bvv___Dr.js";import{M as O}from"./MutiSkeleton-BrRUAXRD.js";import{a as V}from"./ChevronRightIcon-DlQj5ATV.js";import"./validate-C1sTg8Ed.js";import"./index-nquDke5l.js";import"./focus-management-Dc5kYah-.js";import"./bugs-DrBqCKKs.js";import"./use-active-press-BFN1ATli.js";import"./field-BL2o4WA6.js";import"./label-ClcyPzcb.js";import"./use-resolve-button-type-BgQ9fnl6.js";import"./BaseSkeleton-iL-5NRq0.js";const H="_content_ezm9d_1",J="_articleId_ezm9d_14",k={content:H,articleId:J},q=({data:t,className:c,isLoading:a})=>{var i;const n=r.useRef(null);return e.jsx("section",{className:`articleCard overflow-hidden rounded bg-red-50 p-4 whitespace-break-spaces shadow transition hover:shadow-xl ${k.articleCard} ${c}`,children:e.jsxs("article",{ref:n,children:[e.jsxs("div",{className:"mb-4 flex justify-between gap-4",children:[e.jsx(d,{className:"!w-40",isLoading:a,children:e.jsx("h2",{className:"font-black text-red-700 sm:text-xl",children:t.name})}),e.jsx(d,{className:"!w-20",isLoading:a,children:e.jsx("time",{className:"flex-shrink-0 text-right text-xs sm:text-sm",children:F(t.createTime,{onlyDate:!0})})})]}),e.jsx(O,{isLoading:a,children:e.jsx("div",{className:`line-clamp-6 overflow-hidden overflow-ellipsis ${k.content}`,dangerouslySetInnerHTML:{__html:A.sanitize(t.content)}})}),e.jsx("div",{className:"my-2 flex justify-end",children:e.jsx(d,{className:"!w-20",isLoading:a,children:e.jsxs(C,{to:`/article/${t._id}`,className:"flex w-max items-center text-red-400 underline",title:t.name,children:["閱讀更多",e.jsx(V,{className:"size-4"})]})})}),e.jsx(d,{className:"mt-4 !w-80",isLoading:a,children:e.jsx("div",{className:"flex flex-wrap gap-4",children:(i=t==null?void 0:t.sorts)==null?void 0:i.map((o,m)=>e.jsxs("span",{className:"text-blue-800",children:["#",o]},m))})})]})})},de=()=>{var g;const t=M(s=>s.accessToken),[c,a]=r.useState(""),{data:n}=G(),i=()=>n?n.map(s=>({name:s.name,value:s.name})):[],[o,m]=r.useState(""),[x,N]=r.useState([]),[S,v]=r.useState({}),b=()=>{u(1),v({name:o||void 0,sorts:x.length?JSON.stringify(x):void 0})},y=()=>{m(""),N([])},[h,B]=r.useState(1),[p,_]=r.useState(10),u=s=>{T({target:".article-list"}),B(s)},P=s=>{_(s),u(1)},{data:l={list:[{},{},{},{},{}]},isLoading:w,refetch:f}=I({page:h-1,size:p,name:S.name??void 0,sorts:S.sorts??void 0});return r.useEffect(()=>{f()},[h,f,p]),e.jsxs("main",{className:"p-4 pb-16",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"page-title",children:"文章"}),t&&e.jsx(j,{onClick:()=>a("add"),children:"新增"})]}),e.jsxs($,{children:[e.jsx(R,{id:"life-article-name",label:"文章名稱",value:o,setValue:m,placeholder:"請輸入文章名稱",enter:b}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{className:"base-label",children:"分類"}),e.jsx(E,{checkboxList:i(),value:x,setValue:N})]}),e.jsx(j,{onClick:b,children:"搜尋"}),e.jsx(j,{className:"ml-4",type:"info",onClick:y,children:"重置"})]}),e.jsx("section",{className:"article-list scroll-mt-18",children:(g=l==null?void 0:l.list)==null?void 0:g.map((s,z)=>e.jsx(q,{className:"my-4",data:s,isLoading:w},s._id||z))}),e.jsx(D,{nowPage:h,size:p,totalPage:Number((l==null?void 0:l.totalPage)??0),changePage:u,changeSize:P,isLoading:w}),e.jsx(L,{isOpen:c==="add",close:()=>a(""),type:c,apiGetArticle:f})]})};export{de as default};
